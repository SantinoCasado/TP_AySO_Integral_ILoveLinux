# -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant.configure("2") do |config|

  # Definir la primera máquina virtual (Ubuntu) como 'testing'
  config.vm.define "testing" do |vmtest|
    vmtest.vm.box = "ubuntu/jammy64"
    vmtest.vm.hostname = "testing"
    vmtest.vm.network "private_network", ip: "192.168.56.10"
    vmtest.vm.boot_timeout = 1800  # Aumentar el tiempo de espera a 30 minutos

    # Discos adicionales
    vmtest.vm.disk :disk, size: "5GB", name: "DISK1"
    vmtest.vm.disk :disk, size: "3GB", name: "DISK2"
    vmtest.vm.disk :disk, size: "2GB", name: "DISK3"
    vmtest.vm.disk :disk, size: "1GB", name: "DISK4_EXTRA"

    # Configuración del proveedor VirtualBox
    vmtest.vm.provider "virtualbox" do |vb|
      vb.memory = "1024"
      vb.name = "testing"
      vb.cpus = 1
      vb.linked_clone = true
    end

    # Provisión para la máquina Ubuntu
    vmtest.vm.provision "shell", path: "provision.sh"
  end

  # Definir la segunda máquina virtual (Fedora) como 'production'
  config.vm.define "production" do |vmprod|
    vmprod.vm.box = "generic/fedora36"
    vmprod.vm.hostname = "production"
    vmprod.vm.network "private_network", ip: "192.168.56.11"
    vmprod.vm.boot_timeout = 1800  # Aumentar el tiempo de espera a 30 minutos

    # Discos adicionales
    vmprod.vm.disk :disk, size: "5GB", name: "DISK1"
    vmprod.vm.disk :disk, size: "3GB", name: "DISK2"
    vmprod.vm.disk :disk, size: "2GB", name: "DISK3"
    vmprod.vm.disk :disk, size: "1GB", name: "DISK4_EXTRA"

    # Configuración del proveedor VirtualBox
    vmprod.vm.provider "virtualbox" do |vb|
      vb.memory = "1024"
      vb.name = "production"
      vb.cpus = 1
      vb.linked_clone = true
    end

    # Provisión para la máquina Fedora
    vmprod.vm.provision "shell", path: "provision.sh"
  end

end

